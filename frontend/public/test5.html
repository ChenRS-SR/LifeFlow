<!DOCTYPE html>
<html>
<body>
<h1>长度测试</h1>
<pre id="r"></pre>

<script>
const url = 'http://127.0.0.1:8000/api/auth/register';
const h = {'Content-Type': 'application/json'};

function log(s) { document.getElementById('r').textContent += '\n' + s; }

// 测试不同长度
const tests = [
    '{"u":"a","p":"b"}',           // 18 - 基准
    '{"us":"a","pw":"b"}',         // 20
    '{"usr":"a","pwd":"b"}',       // 22
    '{"user":"a","pass":"b"}',     // 24
    '{"usern":"a","passw":"b"}',  // 26
    '{"userna":"a","passwo":"b"}', // 28
    '{"usernam":"a","passwor":"b"}', // 30
    '{"username":"a","password":"b"}', // 32
];

async function run() {
    log('开始测试...');
    for (let i = 0; i < tests.length; i++) {
        const body = tests[i];
        log(`\n测试${i+1}: 长度${body.length}`);
        log('Body: ' + body);
        
        try {
            const res = await fetch(url, {method: 'POST', headers: h, body: body});
            log('结果: OK ' + res.status);
        } catch (e) {
            log('结果: ERR ' + e.message);
            break; // 找到临界点了
        }
    }
    log('\n测试完成!');
}

run();
</script>
</body>
</html>
